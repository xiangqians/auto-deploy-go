<!--
 | @author xiangqian
 | @date 22:45 2023/01/04
 |-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" rel="external nofollow" href="/static/favicon.ico">
    <link rel="stylesheet" href="/static/custom/min.css" type="text/css"/>
    <title>{{ Localize "i18n.shareItem" }}</title>
</head>
<body>

<content>
    <table border="1" cellspacing="0" cellpadding="10" align="center">
        <thead>
        <tr>
            <td>{{ Localize "i18n.no." }}</td>
            <td>{{ Localize "i18n.name" }}</td>
            <td>{{ Localize "i18n.rem" }}</td>
            <td>{{ Localize "i18n.addTime" }}</td>
            <td>{{ Localize "i18n.updTime" }}</td>
            <td>{{ Localize "i18n.op" }}</td>
        </tr>
        </thead>
        <tbody>
        {{ if .shareItems }}
        {{ range $index,$value := .shareItems }}
        <tr>
            <td>{{ Add1 $index }}</td>
            <td>{{ $value.Name }}</td>
            <td>{{ $value.Rem }}</td>
            <td>{{ UnixToTime $value.AddTime }}</td>
            <td>{{ UnixToTime $value.UpdTime }}</td>
            <td>
                <button action="/rx/shareitem/{{ $value.RxId }}/{{ $value.Id }}" method="DELETE"
                        confirm='{{ Localize "i18n.del" }} {{ $value.Name }}?'
                        name="copy" {{ if ne $value.OwnerId $.user.Id }}disabled="disabled" {{ end }}>
                    {{ Localize "i18n.del" }}
                </button>
            </td>
        </tr>
        {{ Put $ "ownerId" $value.OwnerId }}
        {{ end }}
        {{ else }}
        <tr>
            <td colspan="10">{{ Localize "i18n.noData" }}</td>
        </tr>
        {{ end }}
        </tbody>
    </table>
    <br>
    {{ if eq .ownerId .user.Id }}
    <br>
    <div>
        <a name="add" href="/rx/shareitem" method="POST">{{ Localize "i18n.add" }} →</a>
    </div>
    {{ end }}
    <br>
    <div>
        <a href="/rx/index">{{ Localize "i18n.rx" }} →</a>
    </div>
</content>

{{ template "com/footer.html" . }}

</body>
</html>
<script type="text/javascript" src="/static/jquery-v3.6.2/min.js"></script>
<script type="text/javascript" src="/static/custom/min.js"></script>
<script type="text/javascript">
    let $add = $('a[name="add"]')
    if ($add.length > 0) {
        $add[0]['_pre_'] = function () {
            let r = false
            // let code = prompt('{{ Localize "i18n.pleaseEnterSharedCode" }}', '')
            // if (code && code !== "") {
            //     code = code.trim()
            //     r = true
            // }

            let code = null
            // prompt("<p>1213</p>", '');
            return [r, {"code": code}]
        }
    }
</script>